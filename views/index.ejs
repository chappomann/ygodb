<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LA's Yugioh Collection</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="script.js"></script>
</head>

<body>
    <div class="container">
        <h1>LA's Yugioh Collection</h1>

        <div class="buttons">
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search..." onblur="search()">
            </div>

            <button id="filterMagicBtn" type="button" class="btn btn-primary" onclick="filter('type', 'Spell Card')">
                Spell Card Only
            </button>
            <button id="filterTrapBtn" type="button" class="btn btn-primary" onclick="filter('type', 'Trap Card')">
                Trap Card Only
            </button>
            <div class="d-inline-block">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButtonEMO"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    Effect Monster Only
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButtonEMO">
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Effect Monster', 'level', '12', 'includes')">12-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Effect Monster', 'level', '11', 'includes')">11-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Effect Monster', 'level', '10', 'includes')">10-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Effect Monster', 'level', '9', 'includes')">9-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Effect Monster', 'level', '8', 'includes')">8-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Effect Monster', 'level', '7', 'includes')">7-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Effect Monster', 'level', '6', 'includes')">6-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Effect Monster', 'level', '5', 'includes')">5-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Effect Monster', 'level', '4', 'includes')">4-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Effect Monster', 'level', '3', 'includes')">3-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Effect Monster', 'level', '2', 'includes')">2-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Effect Monster', 'level', '1', 'includes')">1-Star</button>
                </ul>
            </div>
            <div class="d-inline-block">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButtonNMO"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    Normal Monster Only
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButtonNMO">
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Normal Monster', 'level', '12')">12-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Normal Monster', 'level', '11')">11-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Normal Monster', 'level', '10')">10-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Normal Monster', 'level', '9')">9-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Normal Monster', 'level', '8')">8-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Normal Monster', 'level', '7')">7-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Normal Monster', 'level', '6')">6-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Normal Monster', 'level', '5')">5-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Normal Monster', 'level', '4')">4-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Normal Monster', 'level', '3')">3-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Normal Monster', 'level', '2')">2-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Normal Monster', 'level', '1')">1-Star</button>
                </ul>
            </div>
            <div class="d-inline-block">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButtonSMO"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    Synchro Monster Only
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButtonSMO">
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Synchro Monster', 'level', '12')">12-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Synchro Monster', 'level', '11')">11-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Synchro Monster', 'level', '10')">10-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Synchro Monster', 'level', '9')">9-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Synchro Monster', 'level', '8')">8-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Synchro Monster', 'level', '7')">7-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Synchro Monster', 'level', '6')">6-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Synchro Monster', 'level', '5')">5-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Synchro Monster', 'level', '4')">4-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Synchro Monster', 'level', '3')">3-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Synchro Monster', 'level', '2')">2-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('humanReadableCardType', 'Synchro Monster', 'level', '1')">1-Star</button>
                </ul>
            </div>
            <div class="d-inline-block">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButtonFMO"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    Fusion Monster Only
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButtonFMO">
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Fusion Monster', 'level', '12')">12-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Fusion Monster', 'level', '11')">11-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Fusion Monster', 'level', '10')">10-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Fusion Monster', 'level', '9')">9-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Fusion Monster', 'level', '8',)">8-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Fusion Monster', 'level', '7')">7-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Fusion Monster', 'level', '6')">6-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Fusion Monster', 'level', '5')">5-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Fusion Monster', 'level', '4')">4-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Fusion Monster', 'level', '3')">3-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Fusion Monster', 'level', '2')">2-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Fusion Monster', 'level', '1')">1-Star</button>
                </ul>
            </div>
            <div class="d-inline-block">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="test3" data-bs-toggle="dropdown"
                    aria-expanded="false">
                    XYZ Monster Only
                </button>
                <ul class="dropdown-menu" aria-labelledby="test3">
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'XYZ Monster', 'level', '12')">12-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'XYZ Monster', 'level', '11')">11-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'XYZ Monster', 'level', '10')">10-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'XYZ Monster', 'level', '9')">9-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'XYZ Monster', 'level', '8',)">8-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'XYZ Monster', 'level', '7')">7-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'XYZ Monster', 'level', '6')">6-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'XYZ Monster', 'level', '5')">5-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'XYZ Monster', 'level', '4')">4-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'XYZ Monster', 'level', '3')">3-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'XYZ Monster', 'level', '2')">2-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'XYZ Monster', 'level', '1')">1-Star</button>
                </ul>
            </div>
            <div class="d-inline-block">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButtonLMO"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    Link Monster Only
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButtonLMO">
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Link Monster', 'linkval', '12')">Link-12</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Link Monster', 'linkval', '11')">Link-11</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Link Monster', 'linkval', '10')">Link-10</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Link Monster', 'linkval', '9')">Link-9</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Link Monster', 'linkval', '8',)">Link-8</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Link Monster', 'linkval', '7')">Link-7</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Link Monster', 'linkval', '6')">Link-6</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Link Monster', 'linkval', '5')">Link-5</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Link Monster', 'linkval', '4')">Link-4</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Link Monster', 'linkval', '3')">Link-3</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Link Monster', 'linkval', '2')">Link-2</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Link Monster', 'linkval', '1')">Link-1</button>
                </ul>
            </div>
            <div class="d-inline-block">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButtonPMO"
                    data-bs-toggle="dropdown" aria-expanded="false">
                    Pendulum Monster Only
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButtonPMO">
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Pendulum', 'level', '12', 'includes')">12-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Pendulum', 'level', '11', 'includes')">11-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Pendulum', 'level', '10', 'includes')">10-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Pendulum', 'level', '9', 'includes')">9-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Pendulum', 'level', '8', 'includes')">8-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Pendulum', 'level', '7', 'includes')">7-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Pendulum', 'level', '6', 'includes')">6-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Pendulum', 'level', '5', 'includes')">5-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Pendulum', 'level', '4', 'includes')">4-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Pendulum', 'level', '3', 'includes')">3-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Pendulum', 'level', '2', 'includes')">2-Star</button>
                    <button class="dropdown-item" type="button"
                        onclick="filterMonster('type', 'Pendulum', 'level', '1', 'includes')">1-Star</button>
                </ul>
            </div>
        </div>

        <div>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Card Name</th>
                        <th>Quantity</th>
                        <th>Level</th>
                        <th>Type</th>
                        <th>Price</th>
                    </tr>
                </thead>
                <tbody>
                    <% dataChunks.forEach(chunk=> { %>
                        <% chunk.forEach(cardData=> { %>
                            <tr>
                                <td>
                                    <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal"
                                        data-bs-target="#modalDetails" onclick="getViewData(<%= cardData.id %>)">
                                        <%= cardData.id %>
                                    </button>
                                </td>
                                <td>
                                    <%= cardData.name %>
                                </td>
                                <td>
                                    <%= cardData.quantity %>
                                </td>
                                <td>
                                    <%= cardData.level ?? 'N/A' %>
                                </td>
                                <td>
                                    <%= cardData.humanReadableCardType %>
                                </td>
                                <td>
                                    <%= parseInt(cardData.card_prices[0].amazon_price)> 0 ?
                                        cardData.card_prices[0].amazon_price : cardData.card_prices[0].tcgplayer_price
                                        %>
                                </td>
                            </tr>
                            <% }); %>
                                <% }); %>
                </tbody>
            </table>
        </div>

        <div class="modal fade" id="modalDetails" tabindex="-1" aria-labelledby="modalDetailsLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Card Data</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form action="/add" method="post">
                            <img src="" id="modal-view-img" class="center-block" alt="...">
                            <div class="form-group">
                                <label class="form-label" for="modal-view-id">ID:</label>
                                <input class="form-control" type="text" id="modal-view-id" name="id" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="modal-view-name">Card Name:</label>
                                <input class="form-control" type="text" id="modal-view-name" name="name" disabled
                                    required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="modal-view-quantity">Quantity:</label>
                                <input class="form-control" type="number" pattern="\d*" id="modal-view-quantity"
                                    name="quantity" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="modal-view-level">Level:</label>
                                <input class="form-control" type="text" id="modal-view-level" name="level" disabled
                                    required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="modal-view-type">Type:</label>
                                <input class="form-control" type="text" id="modal-view-type" name="type" disabled>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="modal-view-price">Price:</label>
                                <input class="form-control" type="text" id="modal-view-price" name="price"
                                    defaultValue="0" disabled required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="modal-view-description">Description:</label>
                                <textarea class="form-control" id="modal-view-description" name="description" rows="4"
                                    cols="100" disabled required></textarea>
                            </div>
                            <button class="btn btn-primary" type="submit" class="btn btn-primary">EDIT CARD</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>